---
title: "博客图片上传方式"
date: 2022-03-24T14:42:56+08:00
tags:
  - cdn
categories:
  - 运维
draft: false
---



#### 图片上传方式



目前采用的方案是PicGo配置Typora上传图片，设置好对应的存储桶





![image-20220324203000738](https://pic.fengidea.com/blog/fengidea/2022/03/6ff8c4fc96a3b29da1a3f53bb5d517fe.png)

自动转义URL到博客的域名上，而图片只在s3上有存储，需要迁移的时候直接迁移s3存储桶，github上的git代码不添加图片。

git 去掉了public。

所以博客分为博客代码和图片存储桶。

#### 后续添加水印

picgo的水印设置还没有做。

#### 博客上传脚本

在同一个文件夹下执行

```@echo off
@echo off
start cmd /c "setx AWS_CA_BUNDLE ^"C:\Program Files\Amazon\AWSCLIV2\awscli\botocore\cacert.pem^""
hugo
aws s3 sync .\public\  s3://blog.fengidea.com.1
aws cloudfront create-invalidation --distribution-id E3Q0O3D0J34TN6 --paths "/*" 
pause 
```

### 不对，sync命令会同步删除对应的图片文件

sync命令会同步删除对应的图片文件，只能选择单独一个作为图床。

只能选择单独的一个存储桶放置文件。



#### amazon的绑定信用卡

amazon的绑定信用卡要过期了，又没有申请新的信用卡，10月份Amazon就不能用了，伤心了。



### Cloudflare 在国内也可以有很快的速度

测试一下国外的站点，发现只要静态资源设置的好，国外站的访问也是可以有很好的效果。

![image-20220327112044679](https://s2.loli.net/2022/03/27/FJtEMYzIeNQThjl.jpg)



![image-20220327112018668](https://s2.loli.net/2022/03/27/gDHFIJBwVt5r6xc.jpg)
